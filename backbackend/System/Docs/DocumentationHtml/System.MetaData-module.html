<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>System.MetaData</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >DataEnvironment</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="System-module.html">Package&nbsp;System</a> ::
        Module&nbsp;MetaData
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="System.MetaData-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module MetaData</h1><p class="nomargin-top"><span class="codelink"><a href="System.MetaData-pysrc.html">source&nbsp;code</a></span></p>
<pre class="literalblock">

Routines for obtaining, generating, and processing meta data about data files, 
file runs, and functions used in the data file generation process. 

The way that the metadata scheme works is:

In the top level System Folder there is a directory ../System/MetaData that 
contains a replica of the file structure outside of the System folder.   
Each &quot;real&quot; path corresponds to a directory in the MetaData directory,
in which metadata about the path is stored, 
e.g. '../Data/Dan_Data/NPR_Puzzle_Solutions', would correspond to 
'../System/MetaData/Data/Dan_Data/NPR_Puzzle_Solutions'.   
Metadata is similarly attached to functions in python modules referenced via their dot-paths.   
        
Given a file path P, the associated path for the metadata is given by the 
function metadatapath(P).  Given a python function dot path, the associated 
path P for the metadata is given by the function opmetadatapath(P).   

Inside a given path's metadata directory is a variety of associated metadata files. 
There are three main kinds of associated things:
        -- data generated during the runtime that produced/was generated by the path. 
        -- metadata attached by the human directly to the file.  
        -- data used and generated by the system Graphical Browser.  
        e.g. Linklists local to the path, and graphviz-generated graphs of these LinkLists.  
        (See commends in System/SystemGraphOperations.py for information about this) 
        

</pre>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="System.MetaData-module.html#AttachMetaData" class="summary-sig-name">AttachMetaData</a>(<span class="summary-sig-arg">NewMetaData</span>,
        <span class="summary-sig-arg">FileName</span>=<span class="summary-sig-default">''</span>,
        <span class="summary-sig-arg">OperationName</span>=<span class="summary-sig-default">''</span>,
        <span class="summary-sig-arg">creates</span>=<span class="summary-sig-default">('../System/MetaData/',)</span>)</span><br />
      Attach metadata to a file a given path.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#AttachMetaData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="System.MetaData-module.html#MakeRuntimeMetaData" class="summary-sig-name">MakeRuntimeMetaData</a>(<span class="summary-sig-arg">opname</span>,
        <span class="summary-sig-arg">Creates</span>,
        <span class="summary-sig-arg">OriginalTimes</span>,
        <span class="summary-sig-arg">OriginalDirInfo</span>,
        <span class="summary-sig-arg">RunOutput</span>,
        <span class="summary-sig-arg">ExitType</span>,
        <span class="summary-sig-arg">ExitStatus</span>,
        <span class="summary-sig-arg">Before</span>,
        <span class="summary-sig-arg">After</span>,
        <span class="summary-sig-arg">IsDifferent</span>)</span><br />
      This is an internal usage function that attaches the results of 
metadata generated during the running of a system update.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#MakeRuntimeMetaData">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="IsFailure"></a><span class="summary-sig-name">IsFailure</span>(<span class="summary-sig-arg">Path</span>)</span><br />
      Returns Boolean True if Path represents is the python dot-path of an 
      operation whose most recent run by the autmatic updater was a 
      failure.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#IsFailure">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="GetBrokenOperations"></a><span class="summary-sig-name">GetBrokenOperations</span>(<span class="summary-sig-arg">depends_on</span>=<span class="summary-sig-default">('../System/MetaData/',)</span>)</span><br />
      Returns list of operations that failed on their most recent run.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#GetBrokenOperations">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="System.MetaData-module.html#LastTimeChanged" class="summary-sig-name">LastTimeChanged</a>(<span class="summary-sig-arg">path</span>)</span><br />
      Returns last time, according to runtime meta data, that a  file (at 
      &quot;path&quot;) was actually modified (e.g.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#LastTimeChanged">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="FindPtime"></a><span class="summary-sig-name">FindPtime</span>(<span class="summary-sig-arg">target</span>,
        <span class="summary-sig-arg">Simple</span>=<span class="summary-sig-default">False</span>)</span><br />
      Returns last time, according to runtime meta data, that a target was 
      succesfully created, if it is created data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#FindPtime">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="metadatapath"></a><span class="summary-sig-name">metadatapath</span>(<span class="summary-sig-arg">datapath</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#metadatapath">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="opmetadatapath"></a><span class="summary-sig-name">opmetadatapath</span>(<span class="summary-sig-arg">oppath</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="System.MetaData-pysrc.html#opmetadatapath">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="AttachMetaData"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">AttachMetaData</span>(<span class="sig-arg">NewMetaData</span>,
        <span class="sig-arg">FileName</span>=<span class="sig-default">''</span>,
        <span class="sig-arg">OperationName</span>=<span class="sig-default">''</span>,
        <span class="sig-arg">creates</span>=<span class="sig-default">('../System/MetaData/',)</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="System.MetaData-pysrc.html#AttachMetaData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Attach metadata to a file a given path.    

ARGUMENTS:
--NewMetaData : a dictionary that will be pickled as metadata.  
--FileName = Path of the file to which the metadata should be attached.
--OperationName = Python dot-path of the operati which the metadata should 
be attached. 
(Either File or OperationName should be specified, but not both.)
        
Metadata attached through this process is put into the file 
        MetaDataPath/AttachedMetaData.pickle.
If this path exists at the time that an AttachMetaData command is run,
the metadata dictionary in the file is updated with the NewMetaData dictionary. 
        

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="MakeRuntimeMetaData"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">MakeRuntimeMetaData</span>(<span class="sig-arg">opname</span>,
        <span class="sig-arg">Creates</span>,
        <span class="sig-arg">OriginalTimes</span>,
        <span class="sig-arg">OriginalDirInfo</span>,
        <span class="sig-arg">RunOutput</span>,
        <span class="sig-arg">ExitType</span>,
        <span class="sig-arg">ExitStatus</span>,
        <span class="sig-arg">Before</span>,
        <span class="sig-arg">After</span>,
        <span class="sig-arg">IsDifferent</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="System.MetaData-pysrc.html#MakeRuntimeMetaData">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

This is an internal usage function that attaches the results of 
metadata generated during the running of a system update.  
It is used primilary by the UpdateLinks function in ../System/Update.py

Suppose the function F is run by the automatic updater.   
During this runtime, several kinds of data are produced:  
--the return output of the function F, and 
--information about the run, its Exit status, whether it changed any 
        files it was meant to produce, etc...

These pieces of runtime metadata are collected by the UpdateLink fnction 
during update, and then passed to MakeRuntimeMetaData function to write 
out the data in an appropriate format to the metadata files. 

in summary, it
-- writes output of the executed function F to a file at path 
        opmetadatapath(F) + '/RuntimeOutput.pickle'
-- appends exit status information to opmetadatapath(F) + '/ExitStatusRecord.csv'
-- for each file j created by the running of F:
        -- appends file-specific creation information to 
        metadatapath(j) + '/CreationRecord.csv'
        -- attaches MetaData returned by the script for file j to
        metadatapath(j) + '/AssociatedMetaData.pickle'

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="LastTimeChanged"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">LastTimeChanged</span>(<span class="sig-arg">path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="System.MetaData-pysrc.html#LastTimeChanged">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns last time, according to runtime meta data, that a  file (at 
  &quot;path&quot;) was actually modified (e.g. not simply overwritten, but
  actually modified.)</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >DataEnvironment</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Mar 31 17:17:16 2009
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
