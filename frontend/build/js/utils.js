define(["underscore"],function(){return{subdict:function(a,b){return _.reduce(b,function(c,d){c[d]=a[d];return c},{})},commonFinder:function(a){var b=[];_.each(_.first(a),function(c,d){var f=_.uniq(_.map(a,function(g){return g[d]}));f.length>1||f[0]===undefined?_.breakLoop():b.push(c)});return b},computeCommon:function(a,b){var c={};for(name in a){var d=a[name],f=_.keys(d.source).slice(b);c[name]={};for(k in f){var g=f[k];c[name][g]=d.source[g]}}b=_.map(_.values(c),function(e){return _.keys(e)});
a=_.map(b,function(e){e=e.slice();e.reverse();return e});b=this.commonFinder(b);a=this.commonFinder(a);a.reverse();if(_.isEqual(b,a))a=[];return[b,a]},count:function(a,b){return a===" "?0:a.split(b).length}}});